/*!
 * maptalks.GlowLayer v0.1.2
 * LICENSE : MIT
 * (c) 2016-2017 maptalks.org
 */
/*!
 * requires maptalks@^0.16.0 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("maptalks")):"function"==typeof define&&define.amd?define(["exports","maptalks"],t):t(e.maptalks=e.maptalks||{},e.maptalks)}(this,function(e,t){"use strict";function o(e,t){for(var o=Object.getOwnPropertyNames(t),r=0;r<o.length;r++){var n=o[r],i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}var a={color:[255,106,106]},s=function(e){function o(t,i){r(this,o);var a=n(this,e.call(this,t,i));return a.geometries=[],a.draw=a._draw,a}return i(o,e),o.prototype.addGeometry=function(e){if(e instanceof t.Geometry){var o=e.getType();(o.indexOf("Polygon")>-1||o.indexOf("LineString")>-1)&&(this.geometries.push(e),this._draw(this.renderContext))}},o.prototype.addGeometries=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.addGeometry(e[t])},o.prototype.prepareToDraw=function(e){this.renderContext=e},o.prototype._draw=function(e){for(var t=0;t<this.geometries.length;t++){var o=this.geometries[t];this._drawGeometry(o,e)}},o.prototype.requestMapToRender=function(){},o.prototype.completeRender=function(){this.fire("layerload",{target:this})},o.prototype._drawGeometry=function(e,t){var o=e.getCoordinates();o[0]instanceof Array?o.forEach(function(e){this._drawLine(e,t)}.bind(this)):this._drawLine(o,t)},o.prototype._drawLine=function(e,t){for(var o=this.options.color,r=this.getMap(),n=5;n>=0;n--){t.beginPath(),t.lineWidth=4*(n+1)-2,t.strokeStyle=0===n?"#fff":"rgba("+o[0]+","+o[1]+","+o[2]+",0.2)";for(var i=e.length,a=0;a<i;a++)if(0===a){var s=r.coordinateToContainerPoint(e[a]);t.moveTo(s.x,s.y)}else if(a>0&&a<i-1){var p=r.coordinateToContainerPoint(e[a+1]);t.lineTo(p.x,p.y)}else t.stroke()}},o}(t.CanvasLayer);s.mergeOptions(a);var p=function(e){function t(){return r(this,t),n(this,e.apply(this,arguments))}return i(t,e),t.prototype.onZoomEnd=function(){e.prototype.onZoomEnd.apply(this,arguments)},t.prototype.onResize=function(){e.prototype.onResize.apply(this,arguments)},t.prototype.onRemove=function(){},t}(t.renderer.CanvasLayerRenderer);s.registerRenderer("canvas",p),e.GlowLayer=s,Object.defineProperty(e,"__esModule",{value:!0}),"undefined"!=typeof console&&console.log("maptalks.GlowLayer v0.1.2, requires maptalks@^0.16.0.")});